/*! Vimg | v1.0.3 | Author: David McKeown | https://github.com/ScottishDave/Vimg | MIT license */ 
(function(a,b,c){"use strict";var d;return d=function(){function a(a){d=this,this.options=a||{},this.options.selector=this.options.selector||".vimg",this.options.interval=parseInt(this.options.interval)||1e3,this.options.offset=parseInt(this.options.offset)||300,this.options.srcAttr=this.options.srcAttr||"data-src",e.nodes=g.querySelectorAll(this.options.selector),this.nodes=[];for(var b=0;b<e.nodes.length;b++)this.nodes.push(e.nodes[b]);return this.listen(),e._shouldPoll=!0,this.pollNodes(),{poll:function(){return d.pollNodes(!0)},images:this.nodes,internals:this}}var d={},e={},f=window,g=b;return a.prototype.listen=function(){return this.subscribeEvent(f,"scroll",this.shouldPoll),this.subscribeEvent(f,"resize",this.shouldPoll),this.subscribeEvent(f,"load",this.shouldPoll),this.throttled=setInterval(function(a){return a.pollNodes}(this),this.options.interval),this.throttled},a.prototype.subscribeEvent=function(a,b,c){return g.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},a.prototype.unsubscribeEvent=function(a,b,c){return g.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},a.prototype.emitEvent=function(a,c){var d;return b.createEvent?(d=b.createEvent("MouseEvents"),d.initEvent(c,!0,!1),a.dispatchEvent(d)):b.createEventObject?(d=b.createEventObject(),a.fireEvent(c,d)):void 0},a.prototype.shouldPoll=function(){return e._shouldPoll=!0,e._shouldPoll},a.prototype.pollNodes=function(a){var b,c=d.nodes.length;if(c=d.nodes.reduce(function(a,b){return"undefined"!=typeof b?a+1:a},0),(e._shouldPoll||a)&&d.nodes.length>0){for(var g=0;g<d.nodes.length;g++)b=d.nodes[g],b&&d.withinView(b)&&(b.src=b.getAttribute(d.options.srcAttr),d.emitEvent(b,"vimg-loaded"),delete d.nodes[g]);e._shouldPoll=!1}return 0===c&&(d.unsubscribeEvent(f,"scroll",d.shouldPoll),d.unsubscribeEvent(f,"resize",d.shouldPoll),d.unsubscribeEvent(f,"load",d.shouldPoll),clearInterval(d.throttled)),d.nodes},a.prototype.withinView=function(a){var c=a.getBoundingClientRect();return"none"===a.style.display?!1:(c.top>=0&&c.left>=0&&c.top)<=(window.innerHeight||b.documentElement.clientHeight)+this.options.offset},"function"!=typeof Array.prototype.reduce&&(Array.prototype.reduce=function(a){if(null===this)throw new TypeError("can't convert "+this+" to object");var b=Object(this),d=b.length>>>0;if("function"!=typeof a)throw new TypeError(a+" is not a function");if(0===d&&arguments.length<2)throw new TypeError("reduce of empty array with no initial value");var e,f=0;if(arguments.length>1)e=arguments[1];else{for(var g=!1;!g&&d>f;)g=f in b,g&&(e=b[f]),f++;if(!g)throw new TypeError("reduce of empty array with no initial value")}for(;d>f;)f in b&&(e=a.call(c,e,b[f],f,b)),f++;return e}),a}(),window.Vimg=d,d}).call(this,window,document);