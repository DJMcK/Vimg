/*! Vimg | v1.0.0 | Author: David McKeown | https://github.com/ScottishDave/Vimg | MIT license */ 
(function(a,b){"use strict";var c;return c=function(){function a(a){c=this,this.options=a||{},this.options.selector=this.options.selector||".vimg",this.options.interval=parseInt(this.options.interval)||1e3,this.options.offset=parseInt(this.options.offset)||300,this.options.srcAttr=this.options.srcAttr||"data-src",d.nodes=f.querySelectorAll(this.options.selector),this.nodes=[];for(var b=0;b<d.nodes.length;b++)this.nodes.push(d.nodes[b]);return this.listen(),d._shouldPoll=!0,this.pollNodes(),{poll:function(){return c.pollNodes(!0)},images:this.nodes,internals:this}}var c={},d={},e=window,f=b;return a.prototype.listen=function(){return this.subscribeEvent(e,"scroll",this.shouldPoll),this.subscribeEvent(e,"resize",this.shouldPoll),this.subscribeEvent(e,"load",this.shouldPoll),this.throttled=setInterval(this.pollNodes,this.options.interval),this.throttled},a.prototype.subscribeEvent=function(a,b,c){return f.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c)},a.prototype.unsubscribeEvent=function(a,b,c){return f.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c)},a.prototype.emitEvent=function(a,c){var d;return b.createEvent?(d=b.createEvent("MouseEvents"),d.initEvent(c,!0,!1),a.dispatchEvent(d)):b.createEventObject?(d=b.createEventObject(),a.fireEvent(c,d)):void 0},a.prototype.shouldPoll=function(){return d._shouldPoll=!0,d._shouldPoll},a.prototype.pollNodes=function(a){var b;if((d._shouldPoll||a)&&c.nodes.length>0){for(var f=0;f<c.nodes.length;f++)b=c.nodes[f],b&&c.withinView(b)&&(b.src=b.getAttribute(this.options.srcAttr),c.emitEvent(b,"vimg-loaded"),delete c.nodes[f]);d._shouldPoll=!1}else 0===c.nodes.length&&(this.unsubscribeEvent(e,"scroll",this.shouldPoll),this.unsubscribeEvent(e,"resize",this.shouldPoll),this.unsubscribeEvent(e,"load",this.shouldPoll),clearInterval(this.throttled));return c.nodes},a.prototype.withinView=function(a){var c=a.getBoundingClientRect();return"none"===a.style.display?!1:(c.top>=0&&c.left>=0&&c.top)<=(window.innerHeight||b.documentElement.clientHeight)+this.options.offset},a}(),window.Vimg=c,c}).call(this,window,document);